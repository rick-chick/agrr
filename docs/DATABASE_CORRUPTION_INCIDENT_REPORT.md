# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç ´æã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå ±å‘Šæ›¸

## ğŸ“… ç™ºç”Ÿæ—¥æ™‚
2025å¹´10æœˆ12æ—¥

## ğŸš¨ å•é¡Œã®æ¦‚è¦
é–‹ç™ºç’°å¢ƒã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒç ´æã—ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æœªå®Ÿè¡Œã¨ãƒ†ã‚¹ãƒˆfixtureãƒ‡ãƒ¼ã‚¿ã®æ··å…¥ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

## ğŸ” èª¿æŸ»çµæœ

### 1. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æœªå®Ÿè¡Œ
```bash
# é–‹ç™ºDBï¼ˆdevelopment.sqlite3ï¼‰
æœ€æ–°ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 20251008100000 (Oct 8, 21:41)

# ãƒ†ã‚¹ãƒˆDBï¼ˆtest.sqlite3ï¼‰
æœ€æ–°ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 20251011230830 (Oct 11)
```

**æ¬ è½ã—ã¦ã„ã‚‹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ3æ—¥åˆ†ï¼‰:**
- `20251009112151_create_farm_sizes.rb` (Oct 9)
- `20251011074223_add_is_anonymous_to_users.rb` (Oct 11)
- `20251011080601_add_is_default_to_farms.rb` (Oct 11)
- `20251011084323_remove_unique_constraint_from_farms_is_default.rb` (Oct 11)
- `20251011084335_change_region_id_to_farm_id_in_free_crop_plans.rb` (Oct 11)
- `20251011085230_remove_region_id_from_farms.rb` (Oct 11)
- `20251011085319_drop_regions_table.rb` (Oct 11)
- `20251011121154_add_area_and_revenue_fields_to_crops.rb` (Oct 11)
- `20251011230830_add_agrr_crop_id_to_crops.rb` (Oct 11)

### 2. å­˜åœ¨ã—ãªã„ãƒ†ãƒ¼ãƒ–ãƒ«
é–‹ç™ºDBã«å­˜åœ¨ã—ãªã„ï¼ˆãƒ†ã‚¹ãƒˆDBã«ã¯å­˜åœ¨ã™ã‚‹ï¼‰:
- `farm_sizes` ãƒ†ãƒ¼ãƒ–ãƒ«
- `free_crop_plans` ãƒ†ãƒ¼ãƒ–ãƒ«

### 3. ãƒ†ã‚¹ãƒˆfixtureãƒ‡ãƒ¼ã‚¿ã®æ··å…¥
é–‹ç™ºDBã«ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒæ··å…¥:

**users ãƒ†ãƒ¼ãƒ–ãƒ«:**
- `User One` (user1@example.com) â† fixtureãƒ‡ãƒ¼ã‚¿
- `User Two` (user2@example.com) â† fixtureãƒ‡ãƒ¼ã‚¿

**farms ãƒ†ãƒ¼ãƒ–ãƒ«:**
- `ãƒ†ã‚¹ãƒˆè¾²å ´1` (35.6812, 139.7671) â† fixtureãƒ‡ãƒ¼ã‚¿
- `ãƒ†ã‚¹ãƒˆè¾²å ´2` (35.6762, 139.6503) â† fixtureãƒ‡ãƒ¼ã‚¿

### 4. ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®çŠ¶æ…‹
```bash
-rw-r--r-- 1 akishige akishige 7.0M Oct  8 21:41 storage/development.sqlite3
-rw-r--r-- 1 root     root     388K Oct 12 15:44 storage/test.sqlite3
```

**æ³¨ç›®ç‚¹:**
- test.sqlite3ã®ã‚ªãƒ¼ãƒŠãƒ¼ãŒ`root`ï¼ˆDockerã‚³ãƒ³ãƒ†ãƒŠã§rootæ¨©é™ã§å®Ÿè¡Œã•ã‚ŒãŸå¯èƒ½æ€§ï¼‰
- development.sqlite3ã®ã‚ªãƒ¼ãƒŠãƒ¼ã¯`akishige`ï¼ˆãƒ›ã‚¹ãƒˆç’°å¢ƒï¼‰

## ğŸ¯ åŸå› ã®ç‰¹å®š

### ä¸»ãªåŸå› 
1. **Oct 8ä»¥é™ã€é–‹ç™ºç’°å¢ƒã§`rails db:migrate`ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ãªã„**
   - é–‹ç™ºDB: æœ€æ–°ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ `20251008100000` (Oct 8)
   - å¿…è¦ãªãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: `20251011230830` (Oct 11)
   - **9å€‹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒæœªå®Ÿè¡Œ**

2. **ãƒ›ã‚¹ãƒˆç’°å¢ƒï¼ˆWSLï¼‰ã§ç›´æ¥ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚ŒãŸ**
   
   **äº‹å®Ÿç¢ºèªæ¸ˆã¿:**
   - âœ… docker compose webã‚³ãƒ³ãƒ†ãƒŠã§ã¯`PREVENT_TEST_IN_DEV=true`ã«ã‚ˆã‚Šä¿è­·ã•ã‚Œã¦ã„ã‚‹
   - âœ… webã‚³ãƒ³ãƒ†ãƒŠå†…ã§RAILS_ENV=testã‚’å®Ÿè¡Œã™ã‚‹ã¨å³åº§ã«ã‚¨ãƒ©ãƒ¼ã§åœæ­¢
   - âŒ ãƒ›ã‚¹ãƒˆç’°å¢ƒã«ã¯`PREVENT_TEST_IN_DEV`ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
   - âŒ ãƒ›ã‚¹ãƒˆç’°å¢ƒã«ã¯ä¿è­·æ©Ÿèƒ½ãŒå­˜åœ¨ã—ãªã„

   **è¨¼æ‹ :**
   ```bash
   # ãƒ›ã‚¹ãƒˆç’°å¢ƒ
   $ echo $PREVENT_TEST_IN_DEV
   (ç©º)
   
   # test.sqlite3ã®ãƒ•ã‚¡ã‚¤ãƒ«æ‰€æœ‰è€…
   -rw-r--r--  1 root     root      397312 Oct 12 15:44 test.sqlite3
   -rw-r--r--  1 akishige akishige   32768 Oct 12 16:00 test.sqlite3-shm
   ```
   - test.sqlite3: rootãŒä½œæˆï¼ˆDockerã‚³ãƒ³ãƒ†ãƒŠã§å®Ÿè¡Œã•ã‚ŒãŸï¼‰
   - test.sqlite3-shm/wal: akishigeãŒä½œæˆï¼ˆãƒ›ã‚¹ãƒˆç’°å¢ƒã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚ŒãŸï¼‰

### ã©ã®ã‚ˆã†ã«ã—ã¦ç™ºç”Ÿã—ãŸã‹

```bash
# å®Ÿéš›ã«å®Ÿè¡Œã•ã‚ŒãŸå¯èƒ½æ€§ãŒé«˜ã„ã‚³ãƒãƒ³ãƒ‰ï¼ˆãƒ›ã‚¹ãƒˆç’°å¢ƒï¼‰
bundle exec rails test
# ã¾ãŸã¯
RAILS_ENV=test bundle exec rails test
```

**ç™ºç”Ÿãƒ¡ã‚«ãƒ‹ã‚ºãƒ :**
1. ãƒ›ã‚¹ãƒˆç’°å¢ƒã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚ŒãŸ
2. `test/test_helper.rb`ã®`fixtures :all`ã«ã‚ˆã‚Šã€å…¨ã¦ã®fixtureãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸ
3. ãƒ†ã‚¹ãƒˆDBã§ã¯ãªãã€é–‹ç™ºDBã«å¯¾ã—ã¦fixtureãƒ‡ãƒ¼ã‚¿ãŒæŒ¿å…¥ã•ã‚ŒãŸ
4. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æœªå®Ÿè¡Œã®ãŸã‚ã€ä¸€éƒ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆfarm_sizesç­‰ï¼‰ãŒå­˜åœ¨ã›ãšã‚¨ãƒ©ãƒ¼

**ãªãœdevelopment DBã«å½±éŸ¿ã—ãŸã‹:**
- ãƒ›ã‚¹ãƒˆç’°å¢ƒã§ã¯ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
- `config/database.yml`ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒdevelopmentã«ãªã£ã¦ã„ã‚‹
- ã¾ãŸã¯ã€RAILS_ENV=testã§ã‚‚ã€docker-composeã®volumeè¨­å®šã«ã‚ˆã‚Šå®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãŒæ··åœ¨

## âš ï¸ æœ¬ç•ªç’°å¢ƒã¸ã®å½±éŸ¿

### ã“ã®ã¾ã¾æœ¬ç•ªã«é©ç”¨ã•ã‚ŒãŸå ´åˆã®æœ€æ‚ªã‚·ãƒŠãƒªã‚ª

1. **ãƒ‡ãƒ¼ã‚¿æå¤±:**
   - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æœªå®Ÿè¡Œã«ã‚ˆã‚Šã€æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ã‚«ãƒ©ãƒ ãŒå­˜åœ¨ã—ãªã„
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒå¤šç™º
   - `farm_sizes`, `free_crop_plans`ãªã©ã®æ©Ÿèƒ½ãŒå‹•ä½œä¸èƒ½

2. **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç ´æ:**
   - ãƒ†ã‚¹ãƒˆfixtureãƒ‡ãƒ¼ã‚¿ãŒæœ¬ç•ªDBã«æ··å…¥
   - å®Ÿãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒæ··åœ¨
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿¡é ¼æ€§ãŒå¤±ã‚ã‚Œã‚‹

3. **å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„é•å:**
   - `free_crop_plans`ãŒ`farm_sizes`ã‚’å‚ç…§
   - ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã‚¨ãƒ©ãƒ¼

4. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®åœæ­¢:**
   - ActiveRecordã‚¨ãƒ©ãƒ¼ãŒé »ç™º
   - ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ä¸å¯èƒ½ã«

## ğŸ›¡ï¸ å†ç™ºé˜²æ­¢ç­–

### 1. Dockerç’°å¢ƒã®å¾¹åº•ï¼ˆæœ€é‡è¦ï¼‰

**ç¾çŠ¶ã®ä¿è­·æ©Ÿèƒ½ï¼ˆæ­£å¸¸å‹•ä½œç¢ºèªæ¸ˆã¿ï¼‰:**
```yaml
# docker-compose.yml ã§æ—¢ã«å®Ÿè£…æ¸ˆã¿
web:
  environment:
    - PREVENT_TEST_IN_DEV=true  # âœ… å‹•ä½œç¢ºèªæ¸ˆã¿
  volumes:
    - storage_dev_data:/app/storage  # âœ… æ°¸ç¶šåŒ–ã•ã‚Œã¦ã„ã‚‹
```

**æ¤œè¨¼çµæœ:**
```bash
$ docker compose exec web bash -c "RAILS_ENV=test bundle exec rails runner 'puts Rails.env'"
âŒ ERROR: Cannot run tests in development container!  # â† æ­£å¸¸ã«ä¿è­·ã•ã‚Œã¦ã„ã‚‹
```

**æ ¹æœ¬çš„ãªå•é¡Œ:**
- âŒ ãƒ›ã‚¹ãƒˆç’°å¢ƒã§ç›´æ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã“ã®ä¿è­·æ©Ÿèƒ½ãŒç„¡åŠ¹
- âŒ ãƒ›ã‚¹ãƒˆç’°å¢ƒã«ã¯`PREVENT_TEST_IN_DEV`ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
- âŒ ãƒ›ã‚¹ãƒˆç’°å¢ƒã®storageãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

**å¯¾ç­–:**

#### A. ãƒ›ã‚¹ãƒˆç’°å¢ƒã§ã®ä¿è­·æ©Ÿèƒ½è¿½åŠ ï¼ˆå¿…é ˆï¼‰

`~/.bashrc` ã¾ãŸã¯ `~/.zshrc` ã«è¿½åŠ :
```bash
# AGRRãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¿è­·è¨­å®š
export PREVENT_TEST_IN_DEV=true

# railsã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆDockerã‚’å¼·åˆ¶ï¼‰
alias rails='echo "âš ï¸  Use: docker compose exec web bundle exec rails" && false'
alias rake='echo "âš ï¸  Use: docker compose exec web bundle exec rake" && false'

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¯å¿…ãšDockerã§
alias agrr-test='docker compose run --rm test bundle exec rails test'
```

#### B. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§ã®ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

`.git/hooks/pre-commit` ã«è¿½åŠ :
```bash
#!/bin/bash
# development.sqlite3ãŒæ”¹å¤‰ã•ã‚Œã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯
if git diff --cached --name-only | grep -q "storage/development.sqlite3"; then
  echo "âŒ ERROR: development.sqlite3 should not be committed!"
  exit 1
fi
```

#### C. å…¨ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã¯Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œï¼ˆãƒ«ãƒ¼ãƒ«åŒ–ï¼‰
- âœ… ãƒ›ã‚¹ãƒˆç’°å¢ƒã§ã®ç›´æ¥å®Ÿè¡Œã‚’ç¦æ­¢
- âœ… READMEã«æ˜è¨˜

### 2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®è‡ªå‹•å®Ÿè¡Œ
```yaml
# docker-compose.yml
command: bash -lc "bundle exec rails db:migrate && bundle exec rails server -b 0.0.0.0"
```
âœ… æ—¢ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŒã€ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ã„ãªã„å ´åˆã¯å®Ÿè¡Œã•ã‚Œãªã„

### 3. CI/CDã§ã®ãƒã‚§ãƒƒã‚¯
```yaml
# .github/workflows/test.yml ã«è¿½åŠ æ¨å¥¨
- name: Check migrations
  run: |
    bundle exec rails db:migrate:status
    if [ $? -ne 0 ]; then
      echo "Migration check failed"
      exit 1
    fi
```

### 4. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
```bash
# ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å¿…ãšå®Ÿè¡Œ
1. rails db:migrate:status  # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç¢ºèª
2. rails db:seed:status     # seedãƒ‡ãƒ¼ã‚¿ç¢ºèª
3. rails console ã§ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèª
   - FarmSize.count
   - User.count
   - Crop.count
```

### 5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®è‡ªå‹•åŒ–
```bash
# æœ¬ç•ªç’°å¢ƒã§å®Ÿè£…æ¨å¥¨
*/6 * * * * /app/scripts/backup-db.sh  # 6æ™‚é–“ã”ã¨
```

### 6. ç’°å¢ƒå¤‰æ•°ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
```bash
# .bashrc ã¾ãŸã¯ .zshrc ã«è¿½åŠ 
export RAILS_ENV=development
export PREVENT_TEST_IN_DEV=true

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¯å¿…ãšDockerã§
alias rails-test='docker compose run --rm test bundle exec rails test'
```

## ğŸ”§ å¾©æ—§æ‰‹é †

### å³åº§ã«å®Ÿè¡Œã™ã¹ãã“ã¨

#### Step 1: ãƒ›ã‚¹ãƒˆç’°å¢ƒã®ä¿è­·æ©Ÿèƒ½ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæœ€å„ªå…ˆï¼‰
```bash
# ä¿è­·æ©Ÿèƒ½ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
./scripts/setup-host-protection.sh

# ã‚·ã‚§ãƒ«ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
source ~/.bashrc  # ã¾ãŸã¯ source ~/.zshrc
```

#### Step 2: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
```bash
docker compose exec web bundle exec rails db:migrate
```

#### Step 3: seedãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
```bash
docker compose exec web bundle exec rails db:seed
```

#### Step 4: ãƒ†ã‚¹ãƒˆfixtureãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```bash
docker compose exec web bundle exec rails runner "
  User.where(email: ['user1@example.com', 'user2@example.com']).destroy_all
  Farm.where(name: ['ãƒ†ã‚¹ãƒˆè¾²å ´1', 'ãƒ†ã‚¹ãƒˆè¾²å ´2']).destroy_all
  puts 'âœ… ãƒ†ã‚¹ãƒˆfixtureãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ'
"
```

#### Step 5: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ•´åˆæ€§ç¢ºèª
```bash
docker compose exec web bundle exec rails runner "
  puts '=== ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ ==='
  puts 'FarmSize: ' + FarmSize.count.to_s
  puts 'User: ' + User.count.to_s
  puts 'Farm: ' + Farm.count.to_s
  puts 'Crop (reference): ' + Crop.reference.count.to_s
  puts 'Crop (total): ' + Crop.count.to_s
  puts ''
  puts 'âœ… ãƒã‚§ãƒƒã‚¯å®Œäº†'
"
```

#### Step 6: ä¿è­·æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
```bash
# ãƒ›ã‚¹ãƒˆç’°å¢ƒã§railsã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ï¼ˆè­¦å‘ŠãŒå‡ºã‚‹ã¯ãšï¼‰
rails --version
# æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ: è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã€ç¢ºèªã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹
```

### æœ€æ‚ªã®å ´åˆï¼ˆå®Œå…¨ãƒªã‚»ãƒƒãƒˆï¼‰
```bash
# âš ï¸ é–‹ç™ºãƒ‡ãƒ¼ã‚¿ãŒå…¨ã¦æ¶ˆãˆã¾ã™
docker compose down -v
docker volume rm agrr_storage_dev_data
docker compose up -d web
docker compose exec web bundle exec rails db:setup
```

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å³åº§ã«å®Ÿè¡Œï¼ˆå¾©æ—§ä½œæ¥­ï¼‰
- [ ] ãƒ›ã‚¹ãƒˆç’°å¢ƒä¿è­·æ©Ÿèƒ½ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ`./scripts/setup-host-protection.sh`ï¼‰
- [ ] ã‚·ã‚§ãƒ«ã®ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆ`source ~/.bashrc`ï¼‰
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
- [ ] seedãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
- [ ] ãƒ†ã‚¹ãƒˆfixtureãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ•´åˆæ€§ã®ç¢ºèª
- [ ] ä¿è­·æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª

### é–‹ç™ºç’°å¢ƒã§ã®å¿…é ˆãƒ«ãƒ¼ãƒ«
- [ ] å…¨ã¦ã®railsã‚³ãƒãƒ³ãƒ‰ã¯Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œ
- [ ] ãƒ›ã‚¹ãƒˆç’°å¢ƒã§ã¯`rails`ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥å®Ÿè¡Œã—ãªã„ï¼ˆè­¦å‘ŠãŒå‡ºã‚‹ï¼‰
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¯å¿…ãš`docker compose run --rm test`ã¾ãŸã¯`agrr-test`ã‚’ä½¿ç”¨
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã¯å¿…ãšå‹•ä½œç¢ºèª
- [ ] æ¯æ—¥ã®ä½œæ¥­é–‹å§‹æ™‚ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª

### è¿½åŠ ã•ã‚ŒãŸä¿è­·æ©Ÿèƒ½
- [ ] `.git/hooks/pre-commit`ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹ç¢ºèª
- [ ] ãƒ›ã‚¹ãƒˆç’°å¢ƒã®ç’°å¢ƒå¤‰æ•°`PREVENT_TEST_IN_DEV`ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆ`agrr-test`, `agrr-rails`ç­‰ï¼‰ãŒä½¿ç”¨å¯èƒ½ã‹ç¢ºèª

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå…¨ã¦é©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ãƒ†ã‚¹ãƒˆãŒå…¨ã¦ãƒ‘ã‚¹ã™ã‚‹ã‹ç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—
- [ ] ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã§å‹•ä½œç¢ºèª
- [ ] ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ã‚’æº–å‚™

## ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [DATABASE_PROTECTION.md](./DATABASE_PROTECTION.md)
- [TEST_GUIDE.md](./TEST_GUIDE.md)
- [README.md](../README.md)

## ğŸ‘¤ å ±å‘Šè€…
AI Assistant

---

**é‡è¦:** ã“ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã¯é–‹ç™ºç’°å¢ƒã®ã¿ã§ç™ºç”Ÿã—ã¾ã—ãŸã€‚æœ¬ç•ªç’°å¢ƒã«ã¯å½±éŸ¿ã—ã¦ã„ã¾ã›ã‚“ã€‚
ã—ã‹ã—ã€åŒæ§˜ã®å•é¡ŒãŒæœ¬ç•ªç’°å¢ƒã§ç™ºç”Ÿã—ãŸå ´åˆã€ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ã¨ãƒ‡ãƒ¼ã‚¿æå¤±ã®ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚
å†ç™ºé˜²æ­¢ç­–ã‚’å³æ ¼ã«é©ç”¨ã—ã¦ãã ã•ã„ã€‚

