<%= form_with(model: interaction_rule, local: true) do |form| %>
  <% if interaction_rule.errors.any? %>
    <div class="alert alert-danger">
      <h3><%= t('interaction_rules.form.errors.title', count: interaction_rule.errors.count) %></h3>
      <ul>
        <% interaction_rule.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= form.label :rule_type, t('interaction_rules.form.rule_type_label'), class: "form-label" %>
    <%= form.select :rule_type, [
      [t('interaction_rules.form.rule_type_continuous'), 'continuous_cultivation']
      # 将来的な拡張: ['混植', 'companion_planting']
    ], { include_blank: t('interaction_rules.form.rule_type_blank') }, { class: "form-control" } %>
  </div>

  <div class="form-group">
    <%= form.label :source_group, t('interaction_rules.form.source_group_label'), class: "form-label" %>
    <%= form.text_field :source_group, class: "form-control", placeholder: t('interaction_rules.form.source_group_placeholder') %>
    <small class="form-text text-muted"><%= t('interaction_rules.form.source_group_help') %></small>
  </div>

  <div class="form-group">
    <%= form.label :target_group, t('interaction_rules.form.target_group_label'), class: "form-label" %>
    <%= form.text_field :target_group, class: "form-control", placeholder: t('interaction_rules.form.target_group_placeholder') %>
    <small class="form-text text-muted"><%= t('interaction_rules.form.target_group_help') %></small>
  </div>

  <div class="form-group">
    <%= form.label :impact_ratio, t('interaction_rules.form.impact_ratio_label'), class: "form-label" %>
    <%= form.number_field :impact_ratio, step: 0.01, min: 0, class: "form-control", placeholder: t('interaction_rules.form.impact_ratio_placeholder') %>
    <small class="form-text text-muted"><%= t('interaction_rules.form.impact_ratio_help') %></small>
  </div>

  <div class="form-group">
    <%= form.label :is_directional, t('interaction_rules.form.direction_label'), class: "form-label" %>
    <div class="form-check">
      <%= form.radio_button :is_directional, true, class: "form-check-input" %>
      <%= form.label :is_directional_true, t('interaction_rules.form.direction_true'), class: "form-check-label" %>
    </div>
    <div class="form-check">
      <%= form.radio_button :is_directional, false, class: "form-check-input" %>
      <%= form.label :is_directional_false, t('interaction_rules.form.direction_false'), class: "form-check-label" %>
    </div>
  </div>

  <div class="form-group">
    <%= form.label :description, t('interaction_rules.form.description_label'), class: "form-label" %>
    <%= form.text_area :description, rows: 3, class: "form-control", placeholder: t('interaction_rules.form.description_placeholder') %>
  </div>

  <% if admin_user? %>
    <div class="form-group">
      <%= form.label :is_reference, class: "form-label" %>
      <div class="form-check">
        <%= form.check_box :is_reference, class: "form-check-input" %>
        <%= form.label :is_reference, t('interaction_rules.form.is_reference_label'), class: "form-check-label" %>
      </div>
      <small class="form-text text-muted"><%= t('interaction_rules.form.is_reference_help') %></small>
    </div>
  <% end %>

  <div class="form-actions">
    <%= form.submit t("interaction_rules.form.submit_#{interaction_rule.new_record? ? 'create' : 'update'}"), class: "btn btn-success" %>
    <%= link_to t('interaction_rules.form.cancel'), interaction_rules_path, class: "btn btn-ghost" %>
  </div>
<% end %>
