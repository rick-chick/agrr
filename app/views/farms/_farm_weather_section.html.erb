<div id="<%= dom_id(farm, :weather_section) %>">
  <div class="field-info">
    <div class="info-item">
      <span class="info-label">ğŸ“ <%= t('farms.weather_section.name') %>:</span>
      <span class="info-value"><%= farm.name %></span>
    </div>
    
    <% if farm.has_coordinates? %>
      <div class="info-item">
        <span class="info-label">ğŸ“ <%= t('farms.weather_section.latitude') %>:</span>
        <span class="info-value"><%= farm.latitude %></span>
      </div>
      
      <div class="info-item">
        <span class="info-label">ğŸ“ <%= t('farms.weather_section.longitude') %>:</span>
        <span class="info-value"><%= farm.longitude %></span>
      </div>
    <% else %>
      <div class="info-item">
        <span class="info-label">ğŸ“ <%= t('farms.weather_section.location') %>:</span>
        <span class="info-value"><%= t('farms.weather_section.location_not_set') %></span>
      </div>
    <% end %>
    
    <div class="info-item">
      <span class="info-label">ğŸŒ¾ <%= t('farms.weather_section.fields_count') %>:</span>
      <span class="info-value"><%= t('farms.weather_section.fields_count_value', count: fields_count) %></span>
    </div>
    
    <div class="info-item">
      <span class="info-label">ğŸ“… <%= t('farms.weather_section.created_at') %>:</span>
      <span class="info-value"><%= I18n.l(farm.created_at, format: :long) %></span>
    </div>
    
    <div class="info-item">
      <span class="info-label">ğŸ“… <%= t('farms.weather_section.updated_at') %>:</span>
      <span class="info-value"><%= I18n.l(farm.updated_at, format: :long) %></span>
    </div>
  </div>

  <!-- Weather Data Chart Section -->
  <% if farm.weather_data_status == 'completed' %>
    <div class="weather-section" data-farm-id="<%= farm.id %>">
      <h3>ğŸ“Š <%= t('farms.weather_section.temperature_data') %></h3>
      <div class="chart-controls">
        <label for="chart-period"><%= t('farms.weather_section.period_select') %>:</label>
        <select id="chart-period" class="chart-period-select">
          <option value="30"><%= t('farms.weather_section.period_30') %></option>
          <option value="90"><%= t('farms.weather_section.period_90') %></option>
          <option value="180"><%= t('farms.weather_section.period_180') %></option>
          <option value="365" selected><%= t('farms.weather_section.period_365') %></option>
          <option value="next_365"><%= t('farms.weather_section.period_next_365') %></option>
        </select>
      </div>
      <div class="chart-container">
        <canvas id="temperatureChart" 
                data-farm-id="<%= farm.id %>"
                data-chart-title="<%= t('farms.weather_section.temperature_chart_title') %>"
                data-chart-title-prediction="<%= t('farms.weather_section.temperature_chart_title_prediction') %>"
                data-temp-max-label="<%= t('farms.weather_section.chart_temp_max') %>"
                data-temp-mean-label="<%= t('farms.weather_section.chart_temp_mean') %>"
                data-temp-min-label="<%= t('farms.weather_section.chart_temp_min') %>"
                data-date-label="<%= t('farms.weather_section.chart_date_label') %>"
                data-temperature-label="<%= t('farms.weather_section.chart_temp_axis') %>"></canvas>
      </div>
    </div>
  <% elsif farm.weather_data_status == 'fetching' %>
    <div class="weather-section">
      <h3>ğŸ“Š <%= t('farms.weather_section.temperature_data') %></h3>
      <% if farm.weather_data_progress >= 100 %>
        <p class="info-message">
          <%= t('farms.weather_section.processing_complete') %>
        </p>
      <% else %>
        <p class="info-message">
          <%= t('farms.weather_section.fetching_progress', progress: farm.weather_data_progress) %>
        </p>
        <% if farm.weather_data_total_years > 0 %>
          <div class="progress-bar">
            <div class="progress-fill" data-progress="<%= farm.weather_data_progress %>" style="width: <%= farm.weather_data_progress %>%"></div>
          </div>
        <% end %>
      <% end %>
    </div>
  <% elsif farm.weather_data_status == 'failed' %>
    <div class="weather-section">
      <h3>ğŸ“Š <%= t('farms.weather_section.temperature_data') %></h3>
      <p class="error-message">
        <%= t('farms.weather_section.fetch_failed') %>
        <% if farm.weather_data_last_error.present? %>
          <br><small><%= farm.weather_data_last_error %></small>
        <% end %>
      </p>
    </div>
  <% else %>
    <div class="weather-section">
      <h3>ğŸ“Š <%= t('farms.weather_section.temperature_data') %></h3>
      <p class="info-message"><%= t('farms.weather_section.preparing') %></p>
    </div>
  <% end %>
</div>