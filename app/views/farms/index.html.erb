<!DOCTYPE html>
<html>
<head>
  <title>УЙ▓та┤СИђУдД - AGRR</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  
  <%= stylesheet_link_tag "fields", "data-turbo-track": "reload" %>
</head>
<body>
  <div class="header">
    <div class="logo">AGRR</div>
    <div class="user-info">
      <a href="<%= root_path %>" class="nav-link">сЃЏсЃ╝сЃа</a>
      <%= link_to "УЙ▓та┤", farms_path, class: "nav-link" %>
      <% if current_user.avatar_url.present? %>
        <%= image_tag current_user.avatar_url, alt: "User Avatar", class: "user-avatar" %>
      <% end %>
      <span><%= current_user.name %></span>
      <%= button_to "сЃГсѓ░сѓбсѓдсЃѕ", auth_logout_path, method: :delete, class: "logout-btn" %>
    </div>
  </div>
  
  <div class="container">
    <% if flash[:notice] %>
      <div class="alert"><%= flash[:notice] %></div>
    <% end %>
    
    <div class="page-header">
      <h1 class="page-title">УЙ▓та┤СИђУдД</h1>
      <%= link_to "Тќ░сЂЌсЂёУЙ▓та┤сѓњУ┐йтіа", new_farm_path, class: "btn btn-success" %>
    </div>
    
    <% if @farms.any? %>
      <div class="fields-grid">
        <% @farms.each do |farm| %>
          <div class="field-card">
            <h3 class="field-name"><%= farm.display_name %></h3>
            <% if farm.has_coordinates? %>
              <div class="field-coordinates">
                ­ЪЊЇ уи»т║д: <%= farm.latitude %><br>
                ­ЪЊЇ ухїт║д: <%= farm.longitude %>
              </div>
            <% else %>
              <div class="field-coordinates">­ЪЊЇ СйЇуй«ТЃЁта▒сЂїУеГт«џсЂЋсѓїсЂдсЂёсЂЙсЂЏсѓЊ</div>
            <% end %>
            <div class="field-info">
              <p>тюЃта┤ТЋ░: <%= farm.fields.count %>тђІ</p>
            </div>
            <div class="field-actions">
              <%= link_to "УЕ│у┤░", farm, class: "btn btn-small" %>
              <%= link_to "тюЃта┤СИђУдД", farm_fields_path(farm), class: "btn btn-small btn-info" %>
              <%= link_to "уиежЏє", edit_farm_path(farm), class: "btn btn-small btn-secondary" %>
              <%= button_to "тЅіжЎц", farm, method: :delete, 
                          class: "btn btn-small btn-danger", 
                          confirm: "сЂЊсЂ«УЙ▓та┤сѓњтЅіжЎцсЂЌсЂЙсЂЎсЂІ№╝Ъ" %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <div class="empty-state-icon">­ЪїЙ</div>
        <h3>сЂЙсЂаУЙ▓та┤сЂїуЎ╗жї▓сЂЋсѓїсЂдсЂёсЂЙсЂЏсѓЊ</h3>
        <p>ТюђтѕЮсЂ«УЙ▓та┤сѓњУ┐йтіасЂЌсЂдтДІсѓЂсЂЙсЂЌсѓЄсЂєсђѓ</p>
        <%= link_to "УЙ▓та┤сѓњУ┐йтіа", new_farm_path, class: "btn btn-success" %>
      </div>
    <% end %>
  </div>
</body>
</html>


