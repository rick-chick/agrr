<% content_for :title, "è¾²å ´ä¸€è¦§ - AGRR" %>

<div class="page-header">
  <h1 class="page-title">è¾²å ´ä¸€è¦§</h1>
  <%= link_to "æ–°ã—ã„è¾²å ´ã‚’è¿½åŠ ", new_farm_path, class: "btn btn-success" %>
</div>

<!-- ãƒ‡ãƒãƒƒã‚°æƒ…å ±ï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰ -->
<% if Rails.env.development? %>
  <div class="debug-info">
    <strong>ãƒ‡ãƒãƒƒã‚°:</strong>
    admin_user? = <%= admin_user? %>,
    current_user.admin = <%= current_user.admin %>,
    @reference_farms.count = <%= @reference_farms.count %>,
    @farms.count = <%= @farms.count %>
  </div>
<% end %>

<% if @reference_farms.any? %>
  <!-- å‚ç…§è¾²å ´ï¼ˆç®¡ç†è€…ã®ã¿è¡¨ç¤ºï¼‰ -->
  <div class="farms-section">
    <h2 class="farms-section-title">å‚ç…§è¾²å ´ï¼ˆæ ½åŸ¹åœ°åŸŸï¼‰ (<%= @reference_farms.count %>ä»¶)</h2>
    
    <div class="farms-grid">
      <% @reference_farms.each do |farm| %>
        <%= render "farm_card_wrapper", farm: farm %>
      <% end %>
    </div>
  </div>
  
  <hr class="farms-divider">
  
  <!-- è‡ªåˆ†ã®è¾²å ´ -->
  <h2 class="farms-section-title">è‡ªåˆ†ã®è¾²å ´ (<%= @farms.count %>ä»¶)</h2>
<% end %>
    
    <% if @farms.any? %>
      <div class="farms-grid" id="farms">
        <% @farms.each do |farm| %>
          <%= turbo_stream_from farm %>
          <%= render "farm_card_wrapper", farm: farm %>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <div class="empty-state-icon">ğŸšœ</div>
        <h3>ã¾ã è¾²å ´ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</h3>
        <p>æœ€åˆã®è¾²å ´ã‚’è¿½åŠ ã—ã¦å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</p>
        <%= link_to "è¾²å ´ã‚’è¿½åŠ ", new_farm_path, class: "btn btn-success" %>
      </div>
    <% end %>


