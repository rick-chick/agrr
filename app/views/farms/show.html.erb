<% content_for :title, "#{@farm.display_name} - AGRR" %>

<div class="page-header">
  <h1 class="page-title farm-name"><%= @farm.display_name %></h1>
  <div>
    <%= link_to t('.fields_list'), farm_fields_path(@farm), class: "btn btn-info" %>
    <%= link_to t('.edit'), edit_farm_path(@farm), class: "btn btn-secondary" %>
  </div>
</div>

<%= turbo_stream_from @farm %>
    
<div class="farm-card">
  <%= render "farm_weather_section", farm: @farm, fields_count: @fields.count %>
      
      <% if @fields.any? %>
        <div class="fields-section">
          <h3><%= t('.fields_list_title') %></h3>
          <div class="fields-grid">
            <% @fields.each do |field| %>
              <div class="field-card-small">
                <h4><%= field.display_name %></h4>
                <div class="field-actions">
                  <%= link_to t('.detail'), farm_field_path(@farm, field), class: "btn btn-info btn-sm" %>
                  <%= link_to t('.edit'), edit_farm_field_path(@farm, field), class: "btn btn-secondary btn-sm" %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% else %>
        <div class="empty-fields">
          <p><%= t('.no_fields') %></p>
          <%= link_to t('.add_first_field'), new_farm_field_path(@farm), class: "btn btn-success" %>
        </div>
      <% end %>
      
      <div class="actions">
        <%= link_to t('.back_to_list'), farms_path, class: "btn btn-secondary" %>
        <%= link_to t('.fields_list'), farm_fields_path(@farm), class: "btn btn-info" %>
        <%= link_to t('.edit'), edit_farm_path(@farm), class: "btn btn-secondary" %>
        <%= button_to t('.delete'), @farm, method: :delete, 
                    class: "btn btn-error", 
                    confirm: t('.delete_confirm') %>
      </div>
    </div>

