<% content_for :title, "#{@crop.name} - #{t('.title')} - AGRR" %>

<div class="page-header">
  <h1 class="page-title">
    <%= link_to @crop.name, crop_path(@crop), class: "crop-link" %> - <%= t('.title') %>
  </h1>
  <%= link_to t('.new_pest'), new_crop_pest_path(@crop), class: "btn btn-success" %>
  <%= link_to t('.back_to_crop'), crop_path(@crop), class: "btn btn-secondary" %>
</div>

<% if @pests.any? %>
  <div class="crops-grid">
    <% @pests.each do |pest| %>
      <div class="crop-card">
        <h3 class="crop-name"><%= pest.name %></h3>
        <% if pest.name_scientific.present? %>
          <div class="crop-variety"><%= t('.scientific_name') %>: <%= pest.name_scientific %></div>
        <% end %>
        <% if pest.family.present? %>
          <div class="crop-variety"><%= t('.family') %>: <%= pest.family %></div>
        <% end %>
        <% if admin_user? && pest.is_reference %>
          <div class="crop-type reference"><%= t('.reference_pest') %></div>
        <% end %>
        <div class="crop-actions">
          <%= link_to t('.actions.show'), crop_pest_path(@crop, pest), class: "btn btn-info btn-sm" %>
          <%= link_to t('.actions.edit'), edit_crop_pest_path(@crop, pest), class: "btn btn-secondary btn-sm" %>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="empty-state">
    <div class="empty-state-icon"><%= t('.empty.icon') %></div>
    <h3><%= t('.empty.title') %></h3>
    <p><%= t('.empty.description') %></p>
    <%= link_to t('.empty.button'), new_crop_pest_path(@crop), class: "btn btn-success" %>
  </div>
<% end %>

