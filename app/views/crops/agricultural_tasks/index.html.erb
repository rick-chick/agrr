<% content_for :title, "#{@crop.name} - #{t('.title')} - AGRR" %>

<div class="page-header">
  <h1 class="page-title">
    <%= link_to @crop.name, crop_path(@crop), class: "crop-link" %> - <%= t('.title') %>
  </h1>
  <%= link_to t('.new_agricultural_task'), new_crop_agricultural_task_path(@crop), class: "btn btn-success" %>
</div>

<% if @templates.any? %>
  <div class="agricultural-tasks-grid">
    <% @templates.each do |template| %>
      <div class="agricultural-task-card">
        <h3 class="agricultural-task-name"><%= template.name %></h3>
        <% if template.description.present? %>
          <div class="agricultural-task-description"><%= truncate(template.description, length: 50) %></div>
        <% end %>
        <% if template.time_per_sqm.present? %>
          <div class="agricultural-task-time">‚è± <%= template.time_per_sqm %> h/„é°</div>
        <% end %>
        <% if template.agricultural_task&.weather_dependency.present? %>
          <div class="agricultural-task-meta">
            üå§ <%= template.agricultural_task.weather_dependency %>
          </div>
        <% end %>
        <div class="agricultural-task-actions">
          <% if template.agricultural_task %>
            <%= link_to t('.actions.show'), agricultural_task_path(template.agricultural_task), class: "btn btn-info btn-sm" %>
          <% end %>
          <%= link_to t('.actions.edit'),
                      edit_crop_agricultural_task_path(@crop, template),
                      class: "btn btn-secondary btn-sm" %>
          <%= button_to t('.actions.delete'),
                        crop_agricultural_task_path(@crop, template),
                        method: :delete,
                        data: { turbo_confirm: t('.actions.delete_confirm') },
                        class: "btn btn-danger btn-sm" %>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="empty-state">
    <div class="empty-state-icon">üîß</div>
    <h3><%= t('.empty.title') %></h3>
    <p><%= t('.empty.description') %></p>
    <%= link_to t('.empty.button'), new_crop_agricultural_task_path(@crop), class: "btn btn-success" %>
  </div>
<% end %>

<%= link_to t('.back_to_crop'), crop_path(@crop), class: "btn btn-secondary" %>






