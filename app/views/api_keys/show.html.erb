<div class="page-header">
  <h1>APIã‚­ãƒ¼ç®¡ç†</h1>
</div>

<div class="card">
  <div class="card__body">
    <p class="text-muted">
      APIã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€ãƒã‚¹ã‚¿ç®¡ç†ç”¨ã®CRUD APIã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
    </p>

    <% if current_user.has_api_key? %>
      <div class="form-group">
        <label for="api_key">APIã‚­ãƒ¼</label>
        <div class="input-group">
          <input 
            type="text" 
            id="api_key" 
            class="form-control" 
            value="<%= current_user.api_key %>" 
            readonly
            data-controller="copy-to-clipboard"
            data-copy-to-clipboard-target="source"
          >
          <button 
            type="button" 
            class="btn btn-secondary"
            data-action="click->copy-to-clipboard#copy"
            data-copy-to-clipboard-target="button"
          >
            ã‚³ãƒ”ãƒ¼
          </button>
        </div>
        <small class="form-text text-muted">
          âš ï¸ APIã‚­ãƒ¼ã¯å®‰å…¨ãªå ´æ‰€ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚å†ç”Ÿæˆã™ã‚‹ã¨å¤ã„ã‚­ãƒ¼ã¯ç„¡åŠ¹ã«ãªã‚Šã¾ã™ã€‚
        </small>
      </div>

      <div class="form-group">
        <%= button_to "APIã‚­ãƒ¼ã‚’å†ç”Ÿæˆ", regenerate_api_key_path, 
            method: :post, 
            class: "btn btn-warning",
            data: { 
              confirm: "APIã‚­ãƒ¼ã‚’å†ç”Ÿæˆã™ã‚‹ã¨ã€ç¾åœ¨ã®ã‚­ãƒ¼ã¯ç„¡åŠ¹ã«ãªã‚Šã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ" 
            } %>
      </div>
    <% else %>
      <div class="alert alert-info">
        <p>APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦APIã‚­ãƒ¼ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚</p>
      </div>

      <div class="form-group">
        <%= button_to "APIã‚­ãƒ¼ã‚’ç”Ÿæˆ", generate_api_key_path, 
            method: :post, 
            class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>

<div class="card mt-4">
  <div class="card__header">
    <h2>ä½¿ç”¨æ–¹æ³•</h2>
  </div>
  <div class="card__body">
    <h3>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã§ã®æŒ‡å®š</h3>
    <pre class="code-block"><code>X-API-Key: <%= current_user.api_key if current_user.has_api_key? %></code></pre>
    <p>ã¾ãŸã¯</p>
    <pre class="code-block"><code>Authorization: Bearer <%= current_user.api_key if current_user.has_api_key? %></code></pre>

    <h3 class="mt-4">ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã®æŒ‡å®š</h3>
    <pre class="code-block"><code>GET /api/v1/masters/crops?api_key=<%= current_user.api_key if current_user.has_api_key? %></code></pre>

    <div class="mt-4">
      <%= link_to "ğŸ“š API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’é–‹ã", api_docs_path, target: "_blank", class: "btn btn-primary" %>
    </div>

    <h3 class="mt-4">åˆ©ç”¨å¯èƒ½ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</h3>
    <ul>
      <li><strong>ä½œç‰© (Crops)</strong></li>
      <li><code>GET /api/v1/masters/crops</code> - ä½œç‰©ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/crops</code> - ä½œç‰©ä½œæˆ</li>
      <li><code>GET /api/v1/masters/crops/:id</code> - ä½œç‰©è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/crops/:id</code> - ä½œç‰©æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/crops/:id</code> - ä½œç‰©å‰Šé™¤</li>
      <li><strong>è‚¥æ–™ (Fertilizes)</strong></li>
      <li><code>GET /api/v1/masters/fertilizes</code> - è‚¥æ–™ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/fertilizes</code> - è‚¥æ–™ä½œæˆ</li>
      <li><code>GET /api/v1/masters/fertilizes/:id</code> - è‚¥æ–™è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/fertilizes/:id</code> - è‚¥æ–™æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/fertilizes/:id</code> - è‚¥æ–™å‰Šé™¤</li>
      <li><strong>å®³è™« (Pests)</strong></li>
      <li><code>GET /api/v1/masters/pests</code> - å®³è™«ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/pests</code> - å®³è™«ä½œæˆ</li>
      <li><code>GET /api/v1/masters/pests/:id</code> - å®³è™«è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/pests/:id</code> - å®³è™«æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/pests/:id</code> - å®³è™«å‰Šé™¤</li>
      <li><strong>è¾²è–¬ (Pesticides)</strong></li>
      <li><code>GET /api/v1/masters/pesticides</code> - è¾²è–¬ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/pesticides</code> - è¾²è–¬ä½œæˆ</li>
      <li><code>GET /api/v1/masters/pesticides/:id</code> - è¾²è–¬è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/pesticides/:id</code> - è¾²è–¬æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/pesticides/:id</code> - è¾²è–¬å‰Šé™¤</li>
      <li><strong>è¾²å ´ (Farms)</strong></li>
      <li><code>GET /api/v1/masters/farms</code> - è¾²å ´ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/farms</code> - è¾²å ´ä½œæˆ</li>
      <li><code>GET /api/v1/masters/farms/:id</code> - è¾²å ´è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/farms/:id</code> - è¾²å ´æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/farms/:id</code> - è¾²å ´å‰Šé™¤</li>
      <li><strong>åœƒå ´ (Fields)</strong></li>
      <li><code>GET /api/v1/masters/farms/:farm_id/fields</code> - åœƒå ´ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/farms/:farm_id/fields</code> - åœƒå ´ä½œæˆ</li>
      <li><code>GET /api/v1/masters/fields/:id</code> - åœƒå ´è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/fields/:id</code> - åœƒå ´æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/fields/:id</code> - åœƒå ´å‰Šé™¤</li>
      <li><strong>è¾²æ¥­ã‚¿ã‚¹ã‚¯ (AgriculturalTasks)</strong></li>
      <li><code>GET /api/v1/masters/agricultural_tasks</code> - è¾²æ¥­ã‚¿ã‚¹ã‚¯ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/agricultural_tasks</code> - è¾²æ¥­ã‚¿ã‚¹ã‚¯ä½œæˆ</li>
      <li><code>GET /api/v1/masters/agricultural_tasks/:id</code> - è¾²æ¥­ã‚¿ã‚¹ã‚¯è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/agricultural_tasks/:id</code> - è¾²æ¥­ã‚¿ã‚¹ã‚¯æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/agricultural_tasks/:id</code> - è¾²æ¥­ã‚¿ã‚¹ã‚¯å‰Šé™¤</li>
      <li><strong>é€£ä½œãƒ«ãƒ¼ãƒ« (InteractionRules)</strong></li>
      <li><code>GET /api/v1/masters/interaction_rules</code> - é€£ä½œãƒ«ãƒ¼ãƒ«ä¸€è¦§</li>
      <li><code>POST /api/v1/masters/interaction_rules</code> - é€£ä½œãƒ«ãƒ¼ãƒ«ä½œæˆ</li>
      <li><code>GET /api/v1/masters/interaction_rules/:id</code> - é€£ä½œãƒ«ãƒ¼ãƒ«è©³ç´°</li>
      <li><code>PATCH /api/v1/masters/interaction_rules/:id</code> - é€£ä½œãƒ«ãƒ¼ãƒ«æ›´æ–°</li>
      <li><code>DELETE /api/v1/masters/interaction_rules/:id</code> - é€£ä½œãƒ«ãƒ¼ãƒ«å‰Šé™¤</li>
    </ul>
  </div>
</div>
