# frozen_string_literal: true

class DataMigrationIndiaReferenceTasks < ActiveRecord::Migration[8.0]
  class TempAgriculturalTask < ActiveRecord::Base
    self.table_name = 'agricultural_tasks'
    has_many :agricultural_task_crops, class_name: 'DataMigrationIndiaReferenceTasks::TempAgriculturalTaskCrop', foreign_key: 'agricultural_task_id'
  end

  class TempAgriculturalTaskCrop < ActiveRecord::Base
    self.table_name = 'agricultural_task_crops'
    belongs_to :agricultural_task, class_name: 'DataMigrationIndiaReferenceTasks::TempAgriculturalTask', foreign_key: 'agricultural_task_id'
    belongs_to :crop, class_name: 'DataMigrationIndiaReferenceTasks::TempCrop', foreign_key: 'crop_id'
  end

  class TempCrop < ActiveRecord::Base
    self.table_name = 'crops'
  end

  ALL_CROPS = [
    'рдЕрджрд░рдХ (рд░рд┐рдпреЛ)',
    'рдЕрд░рд╣рд░ (рддреВрд░ рджрд╛рд▓)',
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЖрд▓реВ (рдХреБрдлрд░реА)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЧрдиреНрдирд╛ (CoC671)',
    'рдЧреЗрд╣реВрдВ (HD2967)',
    'рдЪрдирд╛ (рджреЗрд╕реА)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЪрд╛рд╡рд▓ (IR64)',
    'рдЪрд╛рд╡рд▓ (рдмрд╛рд╕рдорддреА)',
    'рдЬреВрдЯ (JRO524)',
    'рдЬреНрд╡рд╛рд░ (рдЬреНрд╡рд╛рд░ рдЕрдирд╛рдЬ)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдирд╛рд░рд┐рдпрд▓ (рд▓рдВрдмрд╛)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдкреНрдпрд╛рдЬ (рдирд╛рд╕рд┐рдХ рд▓рд╛рд▓)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмрд╛рдЬрд░рд╛ (рдореЛрддреА рдмрд╛рдЬрд░рд╛)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдордХреНрдХрд╛ (рд╕рдВрдХрд░)',
    'рдорд╕реВрд░ (рдорд╕реВрд░ рджрд╛рд▓)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)',
    'рдореВрдВрдЧрдлрд▓реА (TMV2)',
    'рд╕рд░рд╕реЛрдВ (рдкреВрд╕рд╛ рдмреЛрд▓реНрдб)',
    'рд╕реВрд░рдЬрдореБрдЦреА (KBSH44)',
    'рд╕реЛрдпрд╛рдмреАрди (JS335)',
    'рд╣рд▓реНрджреА (рдЕрд▓реНрд▓реЗрдкреНрдкреА)'
  ].freeze

  PLOWING_CROPS = [
    'рдЕрджрд░рдХ (рд░рд┐рдпреЛ)',
    'рдЕрд░рд╣рд░ (рддреВрд░ рджрд╛рд▓)',
    'рдЖрд▓реВ (рдХреБрдлрд░реА)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдЧрдиреНрдирд╛ (CoC671)',
    'рдЧреЗрд╣реВрдВ (HD2967)',
    'рдЪрдирд╛ (рджреЗрд╕реА)',
    'рдЪрд╛рд╡рд▓ (IR64)',
    'рдЪрд╛рд╡рд▓ (рдмрд╛рд╕рдорддреА)',
    'рдЬреВрдЯ (JRO524)',
    'рдЬреНрд╡рд╛рд░ (рдЬреНрд╡рд╛рд░ рдЕрдирд╛рдЬ)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдкреНрдпрд╛рдЬ (рдирд╛рд╕рд┐рдХ рд▓рд╛рд▓)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмрд╛рдЬрд░рд╛ (рдореЛрддреА рдмрд╛рдЬрд░рд╛)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдордХреНрдХрд╛ (рд╕рдВрдХрд░)',
    'рдорд╕реВрд░ (рдорд╕реВрд░ рджрд╛рд▓)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)',
    'рдореВрдВрдЧрдлрд▓реА (TMV2)',
    'рд╕рд░рд╕реЛрдВ (рдкреВрд╕рд╛ рдмреЛрд▓реНрдб)',
    'рд╕реВрд░рдЬрдореБрдЦреА (KBSH44)',
    'рд╕реЛрдпрд╛рдмреАрди (JS335)',
    'рд╣рд▓реНрджреА (рдЕрд▓реНрд▓реЗрдкреНрдкреА)'
  ].freeze

  DIRECT_SEEDING_CROPS = [
    'рдЕрд░рд╣рд░ (рддреВрд░ рджрд╛рд▓)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдЧреЗрд╣реВрдВ (HD2967)',
    'рдЪрдирд╛ (рджреЗрд╕реА)',
    'рдЪрд╛рд╡рд▓ (IR64)',
    'рдЪрд╛рд╡рд▓ (рдмрд╛рд╕рдорддреА)',
    'рдЬреВрдЯ (JRO524)',
    'рдЬреНрд╡рд╛рд░ (рдЬреНрд╡рд╛рд░ рдЕрдирд╛рдЬ)',
    'рдмрд╛рдЬрд░рд╛ (рдореЛрддреА рдмрд╛рдЬрд░рд╛)',
    'рдордХреНрдХрд╛ (рд╕рдВрдХрд░)',
    'рдорд╕реВрд░ (рдорд╕реВрд░ рджрд╛рд▓)',
    'рдореВрдВрдЧрдлрд▓реА (TMV2)',
    'рд╕рд░рд╕реЛрдВ (рдкреВрд╕рд╛ рдмреЛрд▓реНрдб)',
    'рд╕реВрд░рдЬрдореБрдЦреА (KBSH44)',
    'рд╕реЛрдпрд╛рдмреАрди (JS335)'
  ].freeze

  TRANSPLANT_CROPS = [
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЪрд╛рд╡рд▓ (IR64)',
    'рдЪрд╛рд╡рд▓ (рдмрд╛рд╕рдорддреА)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдирд╛рд░рд┐рдпрд▓ (рд▓рдВрдмрд╛)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдкреНрдпрд╛рдЬ (рдирд╛рд╕рд┐рдХ рд▓рд╛рд▓)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)'
  ].freeze

  IRRIGATION_CROPS = [
    'рдЕрджрд░рдХ (рд░рд┐рдпреЛ)',
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЖрд▓реВ (рдХреБрдлрд░реА)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЧрдиреНрдирд╛ (CoC671)',
    'рдЧреЗрд╣реВрдВ (HD2967)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЪрд╛рд╡рд▓ (IR64)',
    'рдЪрд╛рд╡рд▓ (рдмрд╛рд╕рдорддреА)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдирд╛рд░рд┐рдпрд▓ (рд▓рдВрдмрд╛)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдкреНрдпрд╛рдЬ (рдирд╛рд╕рд┐рдХ рд▓рд╛рд▓)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)',
    'рд╣рд▓реНрджреА (рдЕрд▓реНрд▓реЗрдкреНрдкреА)'
  ].freeze

  SHIPPING_PREPARATION_CROPS = [
    'рдЕрджрд░рдХ (рд░рд┐рдпреЛ)',
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЖрд▓реВ (рдХреБрдлрд░реА)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЧрдиреНрдирд╛ (CoC671)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЬреВрдЯ (JRO524)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдирд╛рд░рд┐рдпрд▓ (рд▓рдВрдмрд╛)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдкреНрдпрд╛рдЬ (рдирд╛рд╕рд┐рдХ рд▓рд╛рд▓)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)',
    'рд╣рд▓реНрджреА (рдЕрд▓реНрд▓реЗрдкреНрдкреА)'
  ].freeze

  MULCHING_CROPS = [
    'рдЕрджрд░рдХ (рд░рд┐рдпреЛ)',
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЖрд▓реВ (рдХреБрдлрд░реА)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЧрдиреНрдирд╛ (CoC671)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдирд╛рд░рд┐рдпрд▓ (рд▓рдВрдмрд╛)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)',
    'рд╣рд▓реНрджреА (рдЕрд▓реНрд▓реЗрдкреНрдкреА)'
  ].freeze

  TUNNEL_CROPS = [
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)'
  ].freeze

  SUPPORT_STRUCTURE_CROPS = [
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)'
  ].freeze

  NET_CROPS = [
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)'
  ].freeze

  THINNING_CROPS = [
    'рдЕрд░рд╣рд░ (рддреВрд░ рджрд╛рд▓)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдЬреВрдЯ (JRO524)',
    'рдЬреНрд╡рд╛рд░ (рдЬреНрд╡рд╛рд░ рдЕрдирд╛рдЬ)',
    'рдмрд╛рдЬрд░рд╛ (рдореЛрддреА рдмрд╛рдЬрд░рд╛)',
    'рдордХреНрдХрд╛ (рд╕рдВрдХрд░)',
    'рд╕рд░рд╕реЛрдВ (рдкреВрд╕рд╛ рдмреЛрд▓реНрдб)',
    'рд╕реВрд░рдЬрдореБрдЦреА (KBSH44)'
  ].freeze

  PRUNING_CROPS = [
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)'
  ].freeze

  TRAINING_CROPS = [
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)'
  ].freeze

  GRADING_CROPS = [
    'рдЕрджрд░рдХ (рд░рд┐рдпреЛ)',
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЖрд▓реВ (рдХреБрдлрд░реА)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЧрдиреНрдирд╛ (CoC671)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЬреВрдЯ (JRO524)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдирд╛рд░рд┐рдпрд▓ (рд▓рдВрдмрд╛)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдкреНрдпрд╛рдЬ (рдирд╛рд╕рд┐рдХ рд▓рд╛рд▓)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)',
    'рд╣рд▓реНрджреА (рдЕрд▓реНрд▓реЗрдкреНрдкреА)'
  ].freeze

  PACKAGING_CROPS = [
    'рдЕрджрд░рдХ (рд░рд┐рдпреЛ)',
    'рдЖрдо (рдЕрд▓реНрдлрд╛рдВрд╕реЛ)',
    'рдЖрд▓реВ (рдХреБрдлрд░реА)',
    'рдЗрд▓рд╛рдпрдЪреА (рдорд╛рд▓рд╛рдмрд╛рд░)',
    'рдХрдкрд╛рд╕ (рдмреАрдЯреА рдХрдкрд╛рд╕)',
    'рдХреЙрдлреА (рдЕрд░реЗрдмрд┐рдХрд╛)',
    'рдЪрд╛рдп (рдЕрд╕рдо)',
    'рдЬреВрдЯ (JRO524)',
    'рдЯрдорд╛рдЯрд░ (рдкреВрд╕рд╛ рд░реВрдмреА)',
    'рдирд╛рд░рд┐рдпрд▓ (рд▓рдВрдмрд╛)',
    'рдкрддреНрддрд╛ рдЧреЛрднреА (рдЧреЛрд▓реНрдбрди рдПрдХрд░)',
    'рдкреНрдпрд╛рдЬ (рдирд╛рд╕рд┐рдХ рд▓рд╛рд▓)',
    'рдлреВрд▓ рдЧреЛрднреА (рд╕реНрдиреЛрдмреЙрд▓)',
    'рдмреИрдВрдЧрди (рдмреИрдВрдЧрди)',
    'рдорд┐рд░реНрдЪ (рдЧреБрдВрдЯреВрд░)',
    'рд╣рд▓реНрджреА (рдЕрд▓реНрд▓реЗрдкреНрдкреА)'
  ].freeze

  LEGACY_ENGLISH_NAMES = %w[
    plowing
    base_fertilization
    seeding
    transplanting
    watering
    weeding
    harvesting
    shipping_preparation
    mulching
    tunnel_setup
    support_structure_setup
    net_installation
    thinning
    pruning
    training
    grading
    packaging
  ].freeze

  TASK_DEFINITIONS = {
    'рдЬреБрддрд╛рдИ' => {
      description: 'рдорд┐рдЯреНрдЯреА рдХреЛ рдирд░рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреБрддрд╛рдИ рдХрд░рдирд╛',
      time_per_sqm: 0.05,
      weather_dependency: 'medium',
      required_tools: ['рдХреБрджрд╛рд▓', 'рдлрд╛рд╡рдбрд╝рд╛', 'рд╣рд▓'],
      skill_level: 'intermediate',
      crops: PLOWING_CROPS
    },
    'рдЖрдзрд╛рд░ рдЙрд░реНрд╡рд░рдХ' => {
      description: 'рд░реЛрдкрдг рд╕реЗ рдкрд╣рд▓реЗ рдорд┐рдЯреНрдЯреА рдореЗрдВ рдорд┐рд▓рд╛рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдЙрд░реНрд╡рд░рдХ',
      time_per_sqm: 0.01,
      weather_dependency: 'low',
      required_tools: ['рдХреБрджрд╛рд▓', 'рдЙрд░реНрд╡рд░рдХ'],
      skill_level: 'beginner',
      crops: ALL_CROPS
    },
    'рдмреБрдЖрдИ' => {
      description: 'рдмреАрдЬуВТхЬГха┤уБлчЫ┤цОецТнчиоуБЩуВЛ',
      time_per_sqm: 0.005,
      weather_dependency: 'medium',
      required_tools: ['рдмреАрдЬ', 'рдмреАрдЬ рдмреЛрдиреЗ рдХрд╛ рдпрдВрддреНрд░'],
      skill_level: 'beginner',
      crops: DIRECT_SEEDING_CROPS
    },
    'рд░реЛрдкрд╛рдИ' => {
      description: 'рдкреМрдзреЗ рд▓рдЧрд╛рдирд╛',
      time_per_sqm: 0.02,
      weather_dependency: 'medium',
      required_tools: ['рдкреМрдз', 'рд░реЛрдкрдг рдХрд░рдиреЗ рдХрд╛ рдФрдЬрд╛рд░'],
      skill_level: 'beginner',
      crops: TRANSPLANT_CROPS
    },
    'рд╕рд┐рдВрдЪрд╛рдИ' => {
      description: 'рдлрд╕рд▓реЛрдВ рдХреЛ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдкрд╛рдиреА рджреЗрдирд╛',
      time_per_sqm: 0.01,
      weather_dependency: 'high',
      required_tools: ['рдкрд╛рдиреА рдХреА рдкрд╛рдЗрдк', 'рд╕рд┐рдВрдЪрд╛рдИ рдХрд╛ рдХрдирд╕реНрддрд░'],
      skill_level: 'beginner',
      crops: IRRIGATION_CROPS
    },
    'рдирд┐рд░рд╛рдИ' => {
      description: 'рдЦрд░рдкрддрд╡рд╛рд░ рдХреЛ рд╣рдЯрд╛рдХрд░ рдЦреЗрдд рд╕рд╛рдлрд╝ рдХрд░рдирд╛',
      time_per_sqm: 0.03,
      weather_dependency: 'medium',
      required_tools: ['рджрд░рд╛рдВрддреА', 'рдирд┐рд░рд╛рдИ рдЙрдкрдХрд░рдг'],
      skill_level: 'beginner',
      crops: ALL_CROPS
    },
    'рдХрдЯрд╛рдИ' => {
      description: 'рдкрд░рд┐рдкрдХреНрд╡ рдлрд╕рд▓реЛрдВ рдХреА рдХрдЯрд╛рдИ рдХрд░рдирд╛',
      time_per_sqm: 0.05,
      weather_dependency: 'medium',
      required_tools: ['рдХреИрдВрдЪреА', 'рдХрдЯрд╛рдИ рдЯреЛрдХрд░реА'],
      skill_level: 'beginner',
      crops: ALL_CROPS
    },
    'рд╢рд┐рдкрд┐рдВрдЧ рддреИрдпрд╛рд░реА' => {
      description: 'рд╢рд┐рдкрд┐рдВрдЧ рд╕реЗ рдкрд╣рд▓реЗ рд╕рд╛рдлрд╝ рдХрд░рдирд╛, рдЫрдБрдЯрд╛рдИ рдХрд░рдирд╛ рдФрд░ рдкреИрдХрд┐рдВрдЧ рддреИрдпрд╛рд░ рдХрд░рдирд╛',
      time_per_sqm: 0.05,
      weather_dependency: 'low',
      required_tools: ['рдмрд╛рд▓реНрдЯреА', 'рдЫрдБрдЯрд╛рдИ рдЯреЛрдХрд░реА', 'рдмреНрд░рд╢'],
      skill_level: 'intermediate',
      crops: SHIPPING_PREPARATION_CROPS
    },
    'рдорд▓реНрдЪрд┐рдВрдЧ' => {
      description: 'рдорд▓реНрдЪ рд╢реАрдЯ рдмрд┐рдЫрд╛рдХрд░ рдорд┐рдЯреНрдЯреА рдХреЛ рдврдХрдирд╛',
      time_per_sqm: 0.01,
      weather_dependency: 'medium',
      required_tools: ['рдорд▓реНрдЪ рд╢реАрдЯ', 'рджрд╛рдВрд╡'],
      skill_level: 'intermediate',
      crops: MULCHING_CROPS
    },
    'рд╕реБрд░рдВрдЧ рд╕реЗрдЯрдЕрдк' => {
      description: 'рдЯрдирд▓ (рд╕реБрд░рдВрдЧ) рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛',
      time_per_sqm: 0.02,
      weather_dependency: 'medium',
      required_tools: ['рд╕реБрд░рдВрдЧ рдлреНрд░реЗрдо', 'рдкреНрд▓рд╛рд╕реНрдЯрд┐рдХ рд╢реАрдЯ'],
      skill_level: 'intermediate',
      crops: TUNNEL_CROPS
    },
    'рд╕рдорд░реНрдерди рд╕рдВрд░рдЪрдирд╛ рд╕реЗрдЯрдЕрдк' => {
      description: 'рдлрд╕рд▓ рдХреЛ рд╕рд╣рд╛рд░рд╛ рджреЗрдиреЗ рд╣реЗрддреБ рд╕рдВрд░рдЪрдирд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛',
      time_per_sqm: 0.015,
      weather_dependency: 'low',
      required_tools: ['рд╕рд╣рд╛рд░рд╛ рдбрдВрдбреЗ', 'рдмрд╛рдВрдзрдиреЗ рдХрд╛ рдЯреЗрдк'],
      skill_level: 'intermediate',
      crops: SUPPORT_STRUCTURE_CROPS
    },
    'рдХреАрдЯ рдирд┐рдпрдВрддреНрд░рдг рдиреЗрдЯ рд╕реНрдерд╛рдкрдирд╛' => {
      description: 'рдХреАрдЯ рдирд┐рдпрдВрддреНрд░рдг рдХреЗ рд▓рд┐рдП рдиреЗрдЯ рд▓рдЧрд╛рдирд╛',
      time_per_sqm: 0.015,
      weather_dependency: 'medium',
      required_tools: ['рдХреАрдЯ рдирд┐рдпрдВрддреНрд░рдг рдиреЗрдЯ', 'рдХреНрд▓рд┐рдк'],
      skill_level: 'intermediate',
      crops: NET_CROPS
    },
    'рдкрддрд▓рд╛ рдХрд░рдирд╛' => {
      description: 'рдШрдиреЗ рдкреМрдзреЛрдВ рдХреЛ рд╣рдЯрд╛рдХрд░ рдЙрдЪрд┐рдд рджреВрд░реА рдмрдирд╛рдП рд░рдЦрдирд╛',
      time_per_sqm: 0.01,
      weather_dependency: 'low',
      required_tools: ['рдХреИрдВрдЪреА'],
      skill_level: 'beginner',
      crops: THINNING_CROPS
    },
    'рдЫрдБрдЯрд╛рдИ' => {
      description: 'рдЕрдирд╛рд╡рд╢реНрдпрдХ рд╢рд╛рдЦрд╛рдУрдВ рдХреЛ рдХрд╛рдЯрдирд╛',
      time_per_sqm: 0.02,
      weather_dependency: 'low',
      required_tools: ['рдЫрдБрдЯрд╛рдИ рдХреИрдВрдЪреА'],
      skill_level: 'intermediate',
      crops: PRUNING_CROPS
    },
    'рдкреНрд░рд╢рд┐рдХреНрд╖рдг' => {
      description: 'рдлрд╕рд▓ рдХреЛ рд╕рд╣рд╛рд░реЛрдВ рдкрд░ рдмрд╛рдВрдзрдХрд░ рджрд┐рд╢рд╛ рджреЗрдирд╛',
      time_per_sqm: 0.015,
      weather_dependency: 'low',
      required_tools: ['рдХреНрд▓рд┐рдк', 'рд╕рд╣рд╛рд░рд╛ рдбрдВрдбреЗ'],
      skill_level: 'intermediate',
      crops: TRAINING_CROPS
    },
    'рдЧреНрд░реЗрдбрд┐рдВрдЧ' => {
      description: 'рдЙрдкрдЬ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдорд╛рдирдХреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдореЗрдВ рдмрд╛рдВрдЯрдирд╛',
      time_per_sqm: 0.05,
      weather_dependency: 'low',
      required_tools: ['рдЫрдБрдЯрд╛рдИ рдЯреЛрдХрд░реА', 'рдЧреНрд░реЗрдб рд╢реАрдЯ', 'рддреБрд▓рд╛'],
      skill_level: 'intermediate',
      crops: GRADING_CROPS
    },
    'рдкреИрдХреЗрдЬрд┐рдВрдЧ' => {
      description: 'рдЙрдкрдЬ рдХреЛ рдбрд┐рдмреНрдмреЛрдВ рдпрд╛ рдмреИрдЧ рдореЗрдВ рднрд░рдирд╛',
      time_per_sqm: 0.03,
      weather_dependency: 'low',
      required_tools: ['рдбрд┐рдмреНрдмрд╛', 'рдмреИрдЧ', 'рд▓реЗрдмрд▓'],
      skill_level: 'beginner',
      crops: PACKAGING_CROPS
    }
  }.freeze

  def up
    say 'ЁЯМ▒ уВдуГ│уГЙя╝Иinя╝ЙуБохПВчЕзуВ┐уВ╣уВпуВТцКХхЕеуБЧуБжуБДуБ╛уБЩ...'

    legacy_ids = TempAgriculturalTask.where(name: LEGACY_ENGLISH_NAMES, region: 'in', is_reference: true).pluck(:id)
    if legacy_ids.any?
      TempAgriculturalTaskCrop.where(agricultural_task_id: legacy_ids).delete_all
      TempAgriculturalTask.where(id: legacy_ids).delete_all
    end

    TASK_DEFINITIONS.each do |name, attributes|
      task = TempAgriculturalTask.find_or_initialize_by(name: name, region: 'in', is_reference: true)
      task.description = attributes[:description]
      task.time_per_sqm = attributes[:time_per_sqm]
      task.weather_dependency = attributes[:weather_dependency]
      task.required_tools = attributes[:required_tools].to_json
      task.skill_level = attributes[:skill_level]
      task.user_id = nil
      task.is_reference = true
      task.region = 'in'
      task.save!

      TempAgriculturalTaskCrop.where(agricultural_task_id: task.id).delete_all

      attributes[:crops].each do |crop_name|
        crop = TempCrop.find_or_create_by!(name: crop_name, region: 'in', is_reference: true) do |new_crop|
          new_crop.user_id = nil
          new_crop.variety ||= 'рд╕рд╛рдорд╛рдиреНрдп'
        end

        TempAgriculturalTaskCrop.create!(agricultural_task_id: task.id, crop_id: crop.id)
      end
    end

    say 'тЬЕ уВдуГ│уГЙуБохПВчЕзуВ┐уВ╣уВпцКХхЕеуБМхоМф║ЖуБЧуБ╛уБЧуБЯ'
  end

  def down
    say 'ЁЯЧСя╕П уВдуГ│уГЙя╝Иinя╝ЙуБохПВчЕзуВ┐уВ╣уВпуВТхЙКщЩдуБЧуБжуБДуБ╛уБЩ...'

    task_ids = TempAgriculturalTask.where(name: TASK_DEFINITIONS.keys, region: 'in', is_reference: true).pluck(:id)
    TempAgriculturalTaskCrop.where(agricultural_task_id: task_ids).delete_all if task_ids.any?
    TempAgriculturalTask.where(id: task_ids).delete_all if task_ids.any?

    legacy_ids = TempAgriculturalTask.where(name: LEGACY_ENGLISH_NAMES, region: 'in', is_reference: true).pluck(:id)
    if legacy_ids.any?
      TempAgriculturalTaskCrop.where(agricultural_task_id: legacy_ids).delete_all
      TempAgriculturalTask.where(id: legacy_ids).delete_all
    end

    say 'тЬЕ уВдуГ│уГЙуБохПВчЕзуВ┐уВ╣уВпуВТхЙКщЩдуБЧуБ╛уБЧуБЯ'
  end
end

