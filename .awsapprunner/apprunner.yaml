version: 1.0
runtime: docker
build:
  commands:
    build:
      - echo "Building the application with Docker"
      - docker build -t agrr-app .
run:
  runtime-version: latest
  command: docker run -p 3000:3000 agrr-app
  network:
    port: 3000
    env: PORT
  env:
    - name: RAILS_ENV
      value: production
    - name: RAILS_MASTER_KEY
      value: your_master_key_here
    - name: DATABASE_URL
      value: your_database_url_here
    - name: AWS_ACCESS_KEY_ID
      value: your_aws_access_key_id_here
    - name: AWS_SECRET_ACCESS_KEY
      value: your_aws_secret_access_key_here
    - name: AWS_REGION
      value: ap-northeast-1
    - name: AWS_S3_BUCKET
      value: your_s3_bucket_name_here
    - name: REDIS_URL
      value: your_redis_url_here
    - name: ALLOWED_HOSTS
      value: your_app_runner_url_here
