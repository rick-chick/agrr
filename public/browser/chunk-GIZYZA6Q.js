import{a as v}from"./chunk-M2VVVRR3.js";import{b as g,e as f}from"./chunk-FUJATOUC.js";import"./chunk-ZHQLFSMJ.js";import{j as u}from"./chunk-NXFG3DMW.js";import{Aa as a,Fb as d,Ia as p,Ma as l,ab as c,bb as e,cb as i,vb as n,xb as m}from"./chunk-OVGF36KA.js";var h=o=>["/plans",o],O=class o{constructor(s,t){this.route=s;this.optimizationService=t}planId=0;status="pending";progress=0;subscription=null;ngOnInit(){if(this.planId=Number(this.route.snapshot.paramMap.get("id")),!this.planId){this.status="invalid_plan_id";return}this.subscription=this.optimizationService.subscribe("PlansOptimizationChannel",{cultivation_plan_id:this.planId},{received:s=>{let t=s;t.status&&(this.status=t.status),typeof t.progress=="number"&&(this.progress=t.progress)}})}ngOnDestroy(){this.subscription?.unsubscribe()}static \u0275fac=function(t){return new(t||o)(p(g),p(v))};static \u0275cmp=l({type:o,selectors:[["app-plan-optimizing"]],decls:9,vars:5,consts:[[1,"page"],[3,"routerLink"]],template:function(t,r){t&1&&(e(0,"section",0)(1,"a",1),n(2,"Back to plan"),i(),e(3,"h2"),n(4,"Optimizing"),i(),e(5,"p"),n(6),i(),e(7,"p"),n(8),i()()),t&2&&(a(),c("routerLink",d(3,h,r.planId)),a(5),m("Status: ",r.status),a(2),m("Progress: ",r.progress,"%"))},dependencies:[u,f],styles:[".page[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;border:1px solid #e3e5e8}"]})};export{O as PlanOptimizingComponent};
