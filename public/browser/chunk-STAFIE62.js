import{a as v,b as V,c as W,d as k,e as I,f as N,g as P,h as T,i as L}from"./chunk-T4Z6357I.js";import{a as R}from"./chunk-DLSCGTMR.js";import"./chunk-S2ZNJ6LP.js";import"./chunk-TVVNGJEJ.js";import{b as E,d as F,e as b}from"./chunk-FUJATOUC.js";import"./chunk-TEDWIW3V.js";import"./chunk-ZHQLFSMJ.js";import{j as D}from"./chunk-NXFG3DMW.js";import{$ as g,Aa as d,Ab as c,Bb as u,Cb as _,Ia as f,Ma as C,Xa as x,Ya as h,_ as p,ab as y,bb as t,cb as a,hb as z,lb as M,nb as s,rb as w,vb as l,wb as S}from"./chunk-OVGF36KA.js";function A(m,r){m&1&&(t(0,"p"),l(1,"Loading..."),a())}function j(m,r){if(m&1&&(t(0,"p",3),l(1),a()),m&2){let o=s();d(),S(o.error)}}function O(m,r){if(m&1){let o=z();t(0,"form",4,0),M("ngSubmit",function(){p(o);let e=s();return g(e.updateFertilize())}),t(2,"label"),l(3," Name "),t(4,"input",5),_("ngModelChange",function(e){p(o);let n=s();return u(n.formData.name,e)||(n.formData.name=e),g(e)}),a()(),t(5,"label"),l(6," Region "),t(7,"input",6),_("ngModelChange",function(e){p(o);let n=s();return u(n.formData.region,e)||(n.formData.region=e),g(e)}),a()(),t(8,"label"),l(9," N "),t(10,"input",7),_("ngModelChange",function(e){p(o);let n=s();return u(n.formData.n,e)||(n.formData.n=e),g(e)}),a()(),t(11,"label"),l(12," P "),t(13,"input",8),_("ngModelChange",function(e){p(o);let n=s();return u(n.formData.p,e)||(n.formData.p=e),g(e)}),a()(),t(14,"label"),l(15," K "),t(16,"input",9),_("ngModelChange",function(e){p(o);let n=s();return u(n.formData.k,e)||(n.formData.k=e),g(e)}),a()(),t(17,"label"),l(18," Package Size (kg) "),t(19,"input",10),_("ngModelChange",function(e){p(o);let n=s();return u(n.formData.package_size,e)||(n.formData.package_size=e),g(e)}),a()(),t(20,"label"),l(21," Description "),t(22,"textarea",11),_("ngModelChange",function(e){p(o);let n=s();return u(n.formData.description,e)||(n.formData.description=e),g(e)}),a()(),t(23,"button",12),l(24,"Save"),a()()}if(m&2){let o=w(1),i=s();d(4),c("ngModel",i.formData.name),d(3),c("ngModel",i.formData.region),d(3),c("ngModel",i.formData.n),d(3),c("ngModel",i.formData.p),d(3),c("ngModel",i.formData.k),d(3),c("ngModel",i.formData.package_size),d(3),c("ngModel",i.formData.description),d(),y("disabled",o.invalid||i.saving)}}var B=class m{constructor(r,o,i){this.route=r;this.fertilizeService=o;this.router=i}loading=!0;saving=!1;error=null;formData={name:"",n:null,p:null,k:null,description:null,package_size:null,region:null};fertilizeId=0;ngOnInit(){if(this.fertilizeId=Number(this.route.snapshot.paramMap.get("id")),!this.fertilizeId){this.error="Invalid fertilize id.",this.loading=!1;return}this.fertilizeService.show(this.fertilizeId).subscribe({next:r=>{this.formData={name:r.name,n:r.n??null,p:r.p??null,k:r.k??null,description:r.description??null,package_size:r.package_size??null,region:r.region??null},this.loading=!1},error:r=>{this.error=r.message,this.loading=!1}})}updateFertilize(){this.saving||(this.saving=!0,this.error=null,this.fertilizeService.update(this.fertilizeId,this.formData).subscribe({next:()=>{this.router.navigate(["/fertilizes"])},error:r=>{this.error=r.error?.errors?.join(", ")??r.message??"Failed to update fertilize.",this.saving=!1}}))}static \u0275fac=function(o){return new(o||m)(f(E),f(R),f(F))};static \u0275cmp=C({type:m,selectors:[["app-fertilize-edit"]],decls:8,vars:1,consts:[["fertilizeForm","ngForm"],[1,"page"],["routerLink","/fertilizes"],[1,"error"],[3,"ngSubmit"],["name","name","required","",3,"ngModelChange","ngModel"],["name","region",3,"ngModelChange","ngModel"],["name","n","type","number","step","0.01",3,"ngModelChange","ngModel"],["name","p","type","number","step","0.01",3,"ngModelChange","ngModel"],["name","k","type","number","step","0.01",3,"ngModelChange","ngModel"],["name","package_size","type","number","step","0.01",3,"ngModelChange","ngModel"],["name","description",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"]],template:function(o,i){o&1&&(t(0,"section",1)(1,"a",2),l(2,"Back to fertilizes"),a(),t(3,"h2"),l(4,"Edit Fertilize"),a(),x(5,A,2,0,"p")(6,j,2,1,"p",3)(7,O,25,8,"form"),a()),o&2&&(d(5),h(i.loading?5:i.error?6:7))},dependencies:[D,L,N,v,P,V,W,T,I,k,b],encapsulation:2})};export{B as FertilizeEditComponent};
