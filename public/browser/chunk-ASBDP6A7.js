import{a as T}from"./chunk-5HBRH3B5.js";import{a as A}from"./chunk-AJHKKA3N.js";import{a as R}from"./chunk-4JE3HVEJ.js";import{a as j}from"./chunk-DRVNX7Y7.js";import{c as D,d as B}from"./chunk-U557IDSH.js";import"./chunk-TVVNGJEJ.js";import{b as I,e as E}from"./chunk-FUJATOUC.js";import"./chunk-TEDWIW3V.js";import"./chunk-ZHQLFSMJ.js";import{i as S,j as z}from"./chunk-NXFG3DMW.js";import{$ as P,Aa as t,Eb as b,Fb as k,Gb as o,Hb as c,Ia as m,Ib as w,Ma as C,U as _,Xa as v,Ya as f,_ as h,ab as g,bb as n,cb as a,db as x,hb as y,lb as M,nb as u,vb as i,wb as s,xb as p,yb as O}from"./chunk-OVGF36KA.js";var N=r=>({count:r}),V=()=>["/public-plans/new"],Y=()=>["/plans"];function q(r,l){r&1&&(n(0,"div",2)(1,"p"),i(2),o(3,"translate"),a()()),r&2&&(t(2),s(c(3,1,"public_plans.results.loading_data")))}function G(r,l){if(r&1&&(n(0,"p",3),i(1),a()),r&2){let e=u();t(),s(e.error)}}function H(r,l){r&1&&(n(0,"a",20),i(1),o(2,"translate"),a()),r&2&&(g("routerLink",b(4,Y)),t(),p(" ",c(2,2,"public_plans.results.view_my_plans")," "))}function J(r,l){if(r&1){let e=y();n(0,"div",4)(1,"div",5)(2,"span",6),i(3,"\u{1F4CA}"),a(),n(4,"span",7),i(5),o(6,"translate"),a(),n(7,"span",8),i(8),o(9,"translate"),a()(),n(10,"div",9),i(11),o(12,"translate"),a()(),n(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13),i(17,"\u{1F4B0}"),a(),n(18,"div",14)(19,"div",15),i(20),o(21,"translate"),a(),n(22,"div",16),i(23),o(24,"number"),a()()(),n(25,"div",12)(26,"div",13),i(27,"\u{1F4C9}"),a(),n(28,"div",14)(29,"div",15),i(30),o(31,"translate"),a(),n(32,"div",16),i(33),o(34,"number"),a()()()()(),x(35,"app-gantt-chart",17),n(36,"div",18)(37,"button",19),M("click",function(){h(e);let L=u();return P(L.savePlan())}),i(38),o(39,"translate"),a(),v(40,H,3,5,"a",20),n(41,"a",20),i(42),o(43,"translate"),a()()}if(r&2){let e=u();t(5),s(c(6,13,"public_plans.results.header.title")),t(3),s(c(9,15,"public_plans.results.header.badge")),t(3),O(" ",e.farm==null?null:e.farm.name," \xB7 ",w(12,17,"public_plans.results.header.field_count_value",k(32,N,e.data.data.fields.length))," "),t(9),s(c(21,20,"public_plans.results.header.total_profit")),t(3),p("\xA5",c(24,22,e.data.total_profit)),t(7),s(c(31,24,"public_plans.results.header.total_cost")),t(3),p("\xA5",c(34,26,e.data.total_cost)),t(2),g("data",e.data),t(3),p(" ",c(39,28,"public_plans.save.button")," "),t(2),f(e.auth.user()?40:-1),t(),g("routerLink",b(34,V)),t(),p(" ",c(43,30,"public_plans.results.create_new_plan")," ")}}var F=class r{constructor(l,e,d){this.route=l;this.planService=e;this.publicPlanStore=d}loading=!0;error=null;data=null;get farm(){return this.publicPlanStore.state.farm}auth=_(j);ngOnInit(){let l=Number(this.route.snapshot.queryParamMap.get("planId"))||this.publicPlanStore.state.planId;if(!l){this.error="Missing planId.",this.loading=!1;return}this.planService.getPublicPlanData(l).subscribe({next:e=>{this.data=e,this.loading=!1},error:e=>{this.error=e.message,this.loading=!1}})}savePlan(){if(!this.auth.user()){window.location.href="/auth/login";return}console.log("Saving plan...")}static \u0275fac=function(e){return new(e||r)(m(I),m(R),m(A))};static \u0275cmp=C({type:r,selectors:[["app-public-plan-results"]],decls:5,vars:1,consts:[[1,"public-plans-wrapper"],[1,"cultivation-results-container"],[1,"loading-state"],[1,"error-message"],[1,"compact-header-card","success"],[1,"compact-header-title"],[1,"title-icon"],[1,"title-text"],[1,"status-badge","completed"],[1,"compact-subtitle"],[1,"enhanced-summary-card"],[1,"enhanced-summary-items"],[1,"enhanced-summary-row"],[1,"enhanced-summary-icon"],[1,"enhanced-summary-content"],[1,"enhanced-summary-label"],[1,"enhanced-summary-value"],[3,"data"],[1,"action-buttons"],["type","button",1,"btn","btn-primary",3,"click"],[1,"btn","btn-white",3,"routerLink"]],template:function(e,d){e&1&&(n(0,"div",0)(1,"div",1),v(2,q,4,3,"div",2)(3,G,2,1,"p",3)(4,J,44,35),a()()),e&2&&(t(2),f(d.loading?2:d.error?3:d.data?4:-1))},dependencies:[z,T,B,E,S,D],styles:[".page[_ngcontent-%COMP%]{padding-bottom:100px}.selection-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--font-size-base);color:var(--color-gray-600);margin-bottom:var(--space-4);text-transform:uppercase;letter-spacing:.05em}.region-tabs[_ngcontent-%COMP%]{display:flex;gap:var(--space-3);margin-bottom:var(--space-6);flex-wrap:wrap}.region-tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2);padding:var(--space-3) var(--space-4);background:#fff;border:2px solid var(--color-gray-200);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast);font-weight:500}.region-tab[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:var(--color-gray-50)}.region-tab.active[_ngcontent-%COMP%]{border-color:var(--color-primary);background:var(--color-primary-light);color:#fff}.enhanced-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:var(--space-4)}.enhanced-selection-card[_ngcontent-%COMP%]{background:#fff;border:2px solid var(--color-gray-200);border-radius:var(--radius-lg);padding:var(--space-5);text-align:center;cursor:pointer;transition:all var(--transition-fast)}.enhanced-selection-card[_ngcontent-%COMP%]:hover{border-color:var(--color-info);transform:translateY(-2px)}.enhanced-selection-card.active[_ngcontent-%COMP%]{border-color:var(--color-info);background:var(--color-info-surface);box-shadow:0 0 0 3px #4299e133}.enhanced-card-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:var(--space-3)}.enhanced-card-title[_ngcontent-%COMP%]{font-weight:700;font-size:var(--font-size-lg);margin-bottom:var(--space-1)}.enhanced-card-subtitle[_ngcontent-%COMP%]{color:var(--color-gray-600);font-size:var(--font-size-sm)}.enhanced-card-highlight[_ngcontent-%COMP%]{font-size:var(--font-size-2xl);font-weight:900;color:var(--color-info-dark);margin:var(--space-2) 0}.enhanced-card-detail[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--color-gray-500)}.selection-summary[_ngcontent-%COMP%]{font-weight:700;color:var(--color-gray-700)}.mt-6[_ngcontent-%COMP%]{margin-top:var(--space-6)}.compact-step-divider[_ngcontent-%COMP%]{width:40px;height:2px;background:var(--color-gray-200)}.error-message[_ngcontent-%COMP%]{color:var(--color-error);background:var(--color-error-bg);padding:var(--space-3);border-radius:var(--radius-md);margin-bottom:var(--space-4)}.enhanced-summary-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-4)}.enhanced-summary-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3)}.enhanced-summary-icon[_ngcontent-%COMP%]{font-size:1.5rem;background:var(--color-info-light);width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-md)}.enhanced-summary-label[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--color-gray-600)}.enhanced-summary-value[_ngcontent-%COMP%]{font-weight:700}.crop-check[_ngcontent-%COMP%]{display:none}.crop-card[_ngcontent-%COMP%]{border:2px solid var(--color-gray-200);border-radius:var(--radius-lg);padding:var(--space-5);text-align:center;cursor:pointer;transition:all var(--transition-fast);position:relative;display:block}.crop-card[_ngcontent-%COMP%]:hover{border-color:var(--color-info);transform:translateY(-2px)}.crop-check[_ngcontent-%COMP%]:checked + .crop-card[_ngcontent-%COMP%]{border-color:var(--color-info);background:var(--color-info-surface)}.crop-emoji[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:var(--space-2)}.crop-name[_ngcontent-%COMP%]{font-weight:700}.crop-variety[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--color-gray-600)}.check-mark[_ngcontent-%COMP%]{position:absolute;top:var(--space-2);right:var(--space-2);width:24px;height:24px;background:var(--color-gray-200);color:#fff;border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;opacity:0;transition:all var(--transition-fast)}.crop-check[_ngcontent-%COMP%]:checked + .crop-card[_ngcontent-%COMP%]   .check-mark[_ngcontent-%COMP%]{opacity:1;background:var(--color-info)}.bottom-spacer[_ngcontent-%COMP%]{height:100px}.fixed-bottom-bar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-4)}.selection-counter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2)}.counter-badge[_ngcontent-%COMP%]{background:var(--color-info);color:#fff;width:28px;height:28px;border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;font-weight:700}.hint-message[_ngcontent-%COMP%]{text-align:center;color:var(--color-error);font-size:var(--font-size-sm);margin-top:var(--space-2)}.status-badge[_ngcontent-%COMP%]{padding:var(--space-1) var(--space-2);border-radius:var(--radius-full);font-size:.75rem;font-weight:700;text-transform:uppercase}.status-badge.completed[_ngcontent-%COMP%]{background:var(--color-success);color:#fff}.status-badge.optimizing[_ngcontent-%COMP%]{background:var(--gradient-primary);color:#fff}.compact-header-card.success[_ngcontent-%COMP%]{border-left:4px solid var(--color-success)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--space-4);margin-top:var(--space-6);justify-content:center}.cultivation-results-container[_ngcontent-%COMP%]{padding-bottom:60px}.optimizing-card[_ngcontent-%COMP%]{text-align:center;padding:var(--space-8) var(--space-5)}.progress-spinner[_ngcontent-%COMP%]{margin-bottom:var(--space-6);display:flex;justify-content:center}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--color-gray-200);border-top:4px solid var(--color-info);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.phase-message[_ngcontent-%COMP%]{font-size:var(--font-size-xl);font-weight:700;margin-bottom:var(--space-2)}.duration-hint[_ngcontent-%COMP%]{color:var(--color-gray-600);font-size:var(--font-size-sm);margin-bottom:var(--space-6)}.progress-bar-container[_ngcontent-%COMP%]{width:100%;height:12px;background:var(--color-gray-200);border-radius:var(--radius-full);overflow:hidden;margin-bottom:var(--space-2)}.progress-bar[_ngcontent-%COMP%]{height:100%;background:var(--gradient-primary);transition:width .3s ease-out}.progress-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:var(--color-gray-600);font-size:var(--font-size-sm);font-weight:500}.error-container[_ngcontent-%COMP%]{margin-top:var(--space-8)}.error-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-4);justify-content:center;margin-top:var(--space-4)}"]})};export{F as PublicPlanResultsComponent};
