import{a as E,b as L,c as P,d as T,e as R,f as q,g as B,h as I,i as j}from"./chunk-T4Z6357I.js";import{a as N}from"./chunk-IUKFKDHB.js";import"./chunk-S2ZNJ6LP.js";import"./chunk-TVVNGJEJ.js";import{d as V,e as W}from"./chunk-FUJATOUC.js";import"./chunk-TEDWIW3V.js";import"./chunk-ZHQLFSMJ.js";import{j as D}from"./chunk-NXFG3DMW.js";import{$ as d,Aa as o,Ab as g,Bb as p,Cb as f,Ia as C,Ma as _,Xa as y,Ya as S,_ as s,ab as M,bb as r,cb as i,hb as w,lb as F,nb as h,rb as v,vb as n,wb as b}from"./chunk-OVGF36KA.js";function A(u,a){if(u&1&&(r(0,"p",9),n(1),i()),u&2){let m=h();o(),b(m.error)}}var k=class u{constructor(a,m){this.farmService=a;this.router=m}saving=!1;error=null;formData={name:"",region:"",latitude:0,longitude:0};createFarm(){this.saving||(this.saving=!0,this.error=null,this.farmService.create(this.formData).subscribe({next:a=>{this.router.navigate(["/farms",a.id])},error:a=>{this.error=a.error?.errors?.join(", ")??a.message??"Failed to create farm.",this.saving=!1}}))}static \u0275fac=function(m){return new(m||u)(C(N),C(V))};static \u0275cmp=_({type:u,selectors:[["app-farm-create"]],decls:22,vars:6,consts:[["farmForm","ngForm"],[1,"page"],["routerLink","/farms"],[3,"ngSubmit"],["name","name","required","",3,"ngModelChange","ngModel"],["name","region","required","",3,"ngModelChange","ngModel"],["name","latitude","type","number","step","0.000001","required","",3,"ngModelChange","ngModel"],["name","longitude","type","number","step","0.000001","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"error"]],template:function(m,e){if(m&1){let l=w();r(0,"section",1)(1,"a",2),n(2,"Back to farms"),i(),r(3,"h2"),n(4,"Create Farm"),i(),r(5,"form",3,0),F("ngSubmit",function(){return s(l),d(e.createFarm())}),r(7,"label"),n(8," Name "),r(9,"input",4),f("ngModelChange",function(t){return s(l),p(e.formData.name,t)||(e.formData.name=t),d(t)}),i()(),r(10,"label"),n(11," Region "),r(12,"input",5),f("ngModelChange",function(t){return s(l),p(e.formData.region,t)||(e.formData.region=t),d(t)}),i()(),r(13,"label"),n(14," Latitude "),r(15,"input",6),f("ngModelChange",function(t){return s(l),p(e.formData.latitude,t)||(e.formData.latitude=t),d(t)}),i()(),r(16,"label"),n(17," Longitude "),r(18,"input",7),f("ngModelChange",function(t){return s(l),p(e.formData.longitude,t)||(e.formData.longitude=t),d(t)}),i()(),r(19,"button",8),n(20,"Create"),i(),y(21,A,2,1,"p",9),i()()}if(m&2){let l=v(6);o(9),g("ngModel",e.formData.name),o(3),g("ngModel",e.formData.region),o(3),g("ngModel",e.formData.latitude),o(3),g("ngModel",e.formData.longitude),o(),M("disabled",l.invalid||e.saving),o(2),S(e.error?21:-1)}},dependencies:[D,j,q,E,B,L,P,I,R,T,W],encapsulation:2})};export{k as FarmCreateComponent};
