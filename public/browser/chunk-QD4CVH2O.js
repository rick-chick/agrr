import{a as A}from"./chunk-DRVNX7Y7.js";import{i as w}from"./chunk-T4Z6357I.js";import{c as C,d as S}from"./chunk-U557IDSH.js";import{a as I}from"./chunk-TVVNGJEJ.js";import"./chunk-TEDWIW3V.js";import"./chunk-ZHQLFSMJ.js";import{j as k}from"./chunk-NXFG3DMW.js";import{$ as x,Aa as e,Gb as r,Hb as p,Ma as E,U as g,Xa as v,Ya as f,_ as u,eb as t,fb as i,gb as h,hb as b,ib as K,mb as _,nb as y,vb as n,wb as d,xb as m}from"./chunk-OVGF36KA.js";function T(l,o){if(l&1){let a=b();t(0,"div",12)(1,"label",13),n(2),r(3,"translate"),i(),t(4,"div",14),h(5,"input",15),t(6,"button",16),_("click",function(){u(a);let c=y();return x(c.copyToClipboard())}),n(7),i()()(),t(8,"div",17)(9,"button",18),_("click",function(){u(a);let c=y();return x(c.regenerate())}),n(10),r(11,"translate"),i()()}if(l&2){let a=y();e(2),d(p(3,4,"api_keys.label")),e(3),K("value",a.apiKey),e(2),m(" ",a.copyButtonLabel," "),e(3),m(" ",p(11,6,"api_keys.actions.regenerate")," ")}}function M(l,o){if(l&1){let a=b();t(0,"div",19)(1,"p",20),n(2),r(3,"translate"),i()(),t(4,"button",21),_("click",function(){u(a);let c=y();return x(c.generate())}),n(5),r(6,"translate"),i()}l&2&&(e(2),d(p(3,2,"api_keys.notices.missing")),e(3),m(" ",p(6,4,"api_keys.actions.generate")," "))}var B=class l{apiKeyService=g(I);authService=g(A);apiKey="";copyButtonLabel="\u30B3\u30D4\u30FC";ngOnInit(){let o=this.authService.user();o&&o.api_key?this.apiKey=o.api_key:this.apiKey=this.apiKeyService.getApiKey()??""}generate(){this.apiKeyService.generateApiKey().subscribe(o=>{o.success&&(this.apiKey=o.api_key)})}regenerate(){confirm("\u73FE\u5728\u306EAPI\u30AD\u30FC\u306F\u7121\u52B9\u306B\u306A\u308A\u307E\u3059\u3002\u672C\u5F53\u306B\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F")&&this.apiKeyService.regenerateApiKey().subscribe(o=>{o.success&&(this.apiKey=o.api_key)})}copyToClipboard(){navigator.clipboard.writeText(this.apiKey).then(()=>{this.copyButtonLabel="\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F\uFF01",setTimeout(()=>{this.copyButtonLabel="\u30B3\u30D4\u30FC"},2e3)})}static \u0275fac=function(a){return new(a||l)};static \u0275cmp=E({type:l,selectors:[["app-api-key"]],decls:39,vars:25,consts:[[1,"page-content-container"],[1,"page-header"],[1,"info-box"],[1,"info-box-content"],[1,"info-box","mt-8"],[1,"info-box-title"],[1,"mb-6"],[1,"font-bold","mb-2"],[1,"bg-gray-800","text-white","p-4","rounded","overflow-x-auto"],[1,"my-2","text-center","text-gray-500"],[1,"mt-6"],["href","/api/docs","target","_blank",1,"highlight-box-button"],[1,"form-group","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","gap-2"],["type","text","readonly","",1,"flex-1","p-2","border","rounded","bg-gray-50",3,"value"],["type","button",1,"px-4","py-2","bg-gray-200","rounded","hover:bg-gray-300","transition-colors",3,"click"],[1,"flex","gap-4"],["type","button",1,"px-6","py-2","bg-yellow-500","text-white","rounded","hover:bg-yellow-600","transition-colors",3,"click"],[1,"bg-blue-50","p-4","rounded","mb-6"],[1,"text-blue-700"],["type","button",1,"px-6","py-2","bg-green-600","text-white","rounded","hover:bg-green-700","transition-colors",3,"click"]],template:function(a,s){a&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),n(3),r(4,"translate"),i()(),t(5,"div",2)(6,"p",3),n(7),r(8,"translate"),i(),v(9,T,12,8)(10,M,7,6),i(),t(11,"div",4)(12,"h2",5),n(13),r(14,"translate"),i(),t(15,"div",6)(16,"h3",7),n(17),r(18,"translate"),i(),t(19,"pre",8)(20,"code"),n(21),i()(),t(22,"p",9),n(23),r(24,"translate"),i(),t(25,"pre",8)(26,"code"),n(27),i()()(),t(28,"div",6)(29,"h3",7),n(30),r(31,"translate"),i(),t(32,"pre",8)(33,"code"),n(34),i()()(),t(35,"div",10)(36,"a",11),n(37),r(38,"translate"),i()()()()),a&2&&(e(3),d(p(4,11,"api_keys.title")),e(4),d(p(8,13,"api_keys.warning")),e(2),f(s.apiKey?9:10),e(4),d(p(14,15,"api_keys.usage.heading")),e(4),d(p(18,17,"api_keys.usage.headers.header")),e(4),m("X-API-Key: ",s.apiKey||"YOUR_API_KEY"),e(2),d(p(24,19,"api_keys.usage.headers.or")),e(4),m("Authorization: Bearer ",s.apiKey||"YOUR_API_KEY"),e(3),d(p(31,21,"api_keys.usage.query.heading")),e(4),m("GET /api/v1/masters/crops?api_key=",s.apiKey||"YOUR_API_KEY"),e(3),m(" ",p(38,23,"api_keys.usage.reference_button")," "))},dependencies:[k,w,S,C],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}pre[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}"]})};export{B as ApiKeyComponent};
