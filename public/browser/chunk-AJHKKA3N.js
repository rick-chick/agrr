import{P as i,a as s,i as o}from"./chunk-OVGF36KA.js";var l={farm:null,farmSize:null,selectedCrops:[],planId:null},r="agrr_public_plan_state",n=class a{stateSubject=new o(this.loadFromSession());state$=this.stateSubject.asObservable();get state(){return this.stateSubject.value}setFarm(t){this.updateState({farm:t,farmSize:null,selectedCrops:[],planId:null})}setFarmSize(t){this.updateState({farmSize:t})}setSelectedCrops(t){this.updateState({selectedCrops:t})}setPlanId(t){this.updateState({planId:t})}reset(){this.updateState(l),sessionStorage.removeItem(r)}updateState(t){let e=s(s({},this.state),t);this.stateSubject.next(e),this.saveToSession(e)}saveToSession(t){try{sessionStorage.setItem(r,JSON.stringify(t))}catch(e){console.warn("Failed to save public plan state to session storage",e)}}loadFromSession(){try{let t=sessionStorage.getItem(r);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load public plan state from session storage",t)}return l}static \u0275fac=function(e){return new(e||a)};static \u0275prov=i({token:a,factory:a.\u0275fac,providedIn:"root"})};export{n as a};
